{% extends 'base.html' %}
{% block title %}
<title>추천 제품 목록</title>
{% endblock %}
{% block nav %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container d-flex justify-content-between align-items-center">
        <a class="navbar-brand" href="{{ url_for('dashboard') }}">알레르기 및 질병 맞춤형 건강기능식품 추천 서비스</a>
        <div style="display: flex; align-items: center;">
            <span style="color:#fff;" class="me-3">환영합니다, {{ member.username }} 님!</span>
            <a href="/logout" class="btn btn-danger me-2">로그아웃</a>
            <form action="{{ url_for('self_delete_member', userid=member.userid) }}" method="GET" style="margin: 0;">
                <button type="submit" class="btn btn-warning">회원탈퇴</button>
            </form>
        </div>
    </div>  
</nav>
{% endblock %}
{% block body %}
<div class="container mt-4">
    <div class="d-flex justify-content-start align-items-center" 
         style="width: auto; max-width: 240px; font-size: 14px; padding: 6px 10px; 
                background-color: #e9f7fc; border-radius: 8px; margin-bottom: 15px;">
        <span style="color: #5a5a5a; margin-right: 10px; letter-spacing: 1px;">추천 제품 수:</span>
        <span style="font-size: 14px; color: #1e3a8a; font-weight: bold; 
                     margin-right: 10px; letter-spacing: 1px; min-width: 60px; text-align: right;">
            {{ number }}개
        </span>
        <i class="fas fa-capsules text-primary" 
           style="font-size: 16px; color: #1e3a8a; margin-left: 8px;"></i>
    </div>
    <h2 style="text-align:center;">추천 제품 정보</h2><br>
    
    {% if not products %}
        <h2 style="text-align:center;">추천 제품이 없습니다.</h2>
    {% endif %}
    
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th style="text-align:center;">번호</th>
                    <th style="text-align:center;">원재료명</th>
                    <th style="text-align:center;">하루 섭취 상한선</th>
                    <th style="text-align:center;">주의사항</th>
                    <th style="text-align:center;">주된 기능성</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td style="text-align:center;">{{ loop.index }}</td>
                    <td style="text-align:center;">{{ product.raw_material_name }}</td>
                    <td style="text-align:center;">{{ product.daily_intake_upper_limit }}</td>
                    <td style="text-align:center;">{{ product.cautionary_information }}</td>
                    <td style="text-align:center;">{{ product.primary_functionality }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>  
        <div class="text-center mt-4">
            <a href="{{ url_for('start_service',userid=member.userid) }}" class="btn btn-primary">선택페이지</a>
            <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">홈페이지</a>
        </div>
        <div class="container mt-4">
        </div>
    </div>
</div>
{% endblock %}
