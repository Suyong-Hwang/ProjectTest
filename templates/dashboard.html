{% extends "base.html" %}
{% block title %}<title>회원페이지</title>{% endblock %}
{% block nav %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container d-flex justify-content-between align-items-center">
        <a class="navbar-brand" href="{{ url_for('dashboard') }}">알레르기 및 질병 맞춤형 건강기능식품 추천 서비스</a>
        <div style="display: flex; align-items: center;">
            <span style="color:#fff;" class="me-3">환영합니다, {{ member.username }} 님!</span>
            <a href="/logout" class="btn btn-danger me-2">로그아웃</a>
            <form action="{{ url_for('self_delete_member', userid=member.userid) }}" method="GET" style="margin: 0;">
                <button type="submit" class="btn btn-warning">회원탈퇴</button>
            </form>
        </div>
    </div>  
</nav>
{% endblock %}
{% block body %}

<div class="container mt-4">
    <h2 class="text-center">방문해 주셔서 감사합니다. 오늘도 건강한 하루 되세요!</h2>
    <div class="row">
        <!-- 대시보드 카드 1: 서비스 상태 -->
        <div class="col-md-4">
            <div class="card shadow-lg border-0 mb-4" style="background: #f2f2f2; border-radius: 15px; transition: transform 0.3s, box-shadow 0.3s;">
                <div class="card-body">
                    <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
                    <h3 class="card-title">서비스 정보</h3>
                    <p class="card-text">
                        {% if session['role'] == 'can_service_member' %}
                            서비스가 정상적으로 활성화되어 있습니다.
                        {% else %}
                            서비스가 비활성화 상태입니다.
                        {% endif %}
                    </p>
                    <a href="{{ url_for('login_feature') }}" class="btn btn-info btn-lg">서비스 정보</a>
                </div>
            </div>
        </div>

        <!-- 대시보드 카드 2: 추천 제품 -->
        <div class="col-md-4">
            <div class="card shadow-lg border-0 mb-4" style="background: #f2f2f2; border-radius: 15px; transition: transform 0.3s, box-shadow 0.3s;">
                <div class="card-body">
                    <i class="fas fa-capsules fa-3x text-primary mb-3"></i>
                    <h3 class="card-title">맞춤형 추천 제품</h3>
                    <p class="card-text">당신의 건강을 위한 맞춤형 제품을 확인해 보세요.</p>
                    {% if session['role'] == 'can_service_member' %}
                    <a href="{{ url_for('start_service') }}" class="btn btn-primary btn-lg">추천 제품 보기</a>
                    {% else %}
                    <form action="{{ url_for('denied_service_member_dashboard',userid=member.userid) }}" method="GET">
                        <!-- member.role 값을 서버로 전송 -->
                        <button type="submit" class="btn btn-success btn-lg">서비스 복구 신청</button>
                    </form>  
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- 대시보드 카드 3: 최근 활동 -->
        <div class="col-md-4">
            <div class="card shadow-lg border-0 mb-4" style="background: #f2f2f2; border-radius: 15px; transition: transform 0.3s, box-shadow 0.3s;">
                <div class="card-body">
                    <i class="fas fa-history fa-3x text-warning mb-3"></i>
                    <h3 class="card-title">최근 활동</h3>
                    <p class="card-text">최근 로그인 및 활동 내역을 확인할 수 있습니다.</p>
                    <a href="{{ url_for('dashboard') }}" class="btn btn-warning btn-lg">활동 내역 확인</a>
                </div>
            </div>
        </div>

        <!-- 대시보드 카드 4: 문의사항 -->
        <div class="col-md-4">
            <div class="card shadow-lg border-0 mb-4"
                 style="background: #f2f2f2; border-radius: 15px; transition: transform 0.3s, box-shadow 0.3s;">
                <div class="card-body">
                    <i class="fas fa-envelope fa-3x text-primary mb-3"></i>
                    <h3 class="card-title">문의하기</h3>
                    <p class="card-text">문의사항이 있으시면 언제든지 연락해주세요.</p>
                    <form action="{{ url_for('login_enquire',userid=member.userid) }}" method="GET">
                        <button type="submit" class="btn btn-primary btn-lg">문의하기</button>
                    </form>  
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

